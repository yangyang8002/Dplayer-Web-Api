# DPlayer å¼¹å¹•è§†é¢‘æ’­æ”¾ç³»ç»Ÿ

ä¸€ä¸ªåŸºäº Node.js + Express + DPlayer çš„å¼¹å¹•è§†é¢‘æ’­æ”¾ç³»ç»Ÿï¼Œæ”¯æŒå¤šç§è§†é¢‘æ ¼å¼ã€å¼¹å¹•å‘é€ä¸ç®¡ç†ã€æ•æ„Ÿè¯è¿‡æ»¤ç­‰åŠŸèƒ½ã€‚

**ä»“åº“åœ°å€ï¼š** https://github.com/yangyang8002/Dplayer-Web-Api

## åŠŸèƒ½ä»‹ç»

### ğŸ¬ è§†é¢‘æ’­æ”¾å™¨
- æ”¯æŒå¤šç§è§†é¢‘æ ¼å¼ï¼šæ™®é€šè§†é¢‘ã€HLS(m3u8)ã€FLV
- è‡ªåŠ¨è¯†åˆ«è§†é¢‘ç±»å‹
- æ”¯æŒæˆªå›¾ã€çƒ­é”®ã€å¾ªç¯æ’­æ”¾ç­‰åŠŸèƒ½
- å“åº”å¼å…¨å±æ’­æ”¾ç•Œé¢

### ğŸ’¬ å¼¹å¹•ç³»ç»Ÿ
- å…¼å®¹ DPlayer v3 æ ‡å‡†æ ¼å¼ API
- æ”¯æŒå¼¹å¹•å‘é€ã€é¢œè‰²è‡ªå®šä¹‰ã€ä½ç½®è®¾ç½®ï¼ˆæ»šåŠ¨/é¡¶éƒ¨/åº•éƒ¨ï¼‰
- æŒ‰è§†é¢‘IDè‡ªåŠ¨åˆ†ç»„å¼¹å¹•
- æ•æ„Ÿè¯è‡ªåŠ¨è¿‡æ»¤

### ğŸ›¡ï¸ æ•æ„Ÿè¯è¿‡æ»¤
- å†…ç½®æ•æ„Ÿè¯åº“ï¼Œè‡ªåŠ¨è¿‡æ»¤è¿è§„å¼¹å¹•
- æ”¯æŒä» GitHub è‡ªåŠ¨æ›´æ–°æ•æ„Ÿè¯åº“ï¼ˆæ¯24å°æ—¶ï¼‰
- ç®¡ç†å‘˜å¯æ‰‹åŠ¨æ·»åŠ /åˆ é™¤å±è”½è¯

### ğŸ”§ ç®¡ç†åå°
- å¯†ç ç™»å½•éªŒè¯
- å¼¹å¹•åˆ—è¡¨æŸ¥çœ‹ä¸åˆ é™¤
- å±è”½è¯ç®¡ç†ï¼ˆæ·»åŠ /åˆ é™¤ï¼‰

## é¡¹ç›®ç»“æ„

```
Dplayer-Web-Api/
â”œâ”€â”€ server.js           # æœåŠ¡ç«¯ä¸»æ–‡ä»¶
â”œâ”€â”€ package.json        # é¡¹ç›®ä¾èµ–é…ç½®
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ danmu.json      # å¼¹å¹•æ•°æ®å­˜å‚¨
â”‚   â””â”€â”€ banned_words.json # å±è”½è¯åº“
â””â”€â”€ public/
    â”œâ”€â”€ player.html     # æ’­æ”¾å™¨é¡µé¢
    â””â”€â”€ admin.html      # ç®¡ç†åå°é¡µé¢
```

## éƒ¨ç½²æ­¥éª¤

### æ–¹å¼ä¸€ï¼šä» GitHub å…‹éš†

```bash
git clone https://github.com/yangyang8002/Dplayer-Web-Api.git
cd Dplayer-Web-Api
npm install
npm start
```

### æ–¹å¼äºŒï¼šç›´æ¥ä¸‹è½½

ä» [Releases](https://github.com/yangyang8002/Dplayer-Web-Api/releases) ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼Œè§£å‹åæ‰§è¡Œï¼š

```bash
npm install
npm start
```

### ç¯å¢ƒè¦æ±‚

- Node.js >= 14.x
- npm æˆ– yarn
- Gitï¼ˆç”¨äºæ•æ„Ÿè¯åº“è‡ªåŠ¨æ›´æ–°ï¼‰

### è®¿é—®åœ°å€

| é¡µé¢ | åœ°å€ |
|------|------|
| æ’­æ”¾å™¨ | `http://localhost:1919/player/?url=è§†é¢‘åœ°å€` |
| ç®¡ç†åå° | `http://localhost:1919/admin/` |

### ç®¡ç†å‘˜å¯†ç 

é»˜è®¤ç®¡ç†å‘˜å¯†ç ï¼š`admin123`

å¯åœ¨ `server.js` ä¸­ä¿®æ”¹ `ADMIN_PASSWORD` å˜é‡ï¼š

```javascript
const ADMIN_PASSWORD = 'your_password_here';
```

## ä½¿ç”¨è¯´æ˜

### æ’­æ”¾è§†é¢‘

è®¿é—®æ’­æ”¾å™¨é¡µé¢å¹¶ä¼ å…¥è§†é¢‘åœ°å€ï¼š

```
http://localhost:1919/player/?url=https://example.com/video.mp4
```

æ”¯æŒçš„æ ¼å¼ï¼š
- æ™®é€šè§†é¢‘ï¼š`.mp4`ã€`.webm` ç­‰
- HLSç›´æ’­/ç‚¹æ’­ï¼š`.m3u8`
- FLVç›´æ’­/ç‚¹æ’­ï¼š`.flv`

### API æ¥å£

#### å¼¹å¹• APIï¼ˆDPlayer v3 æ ¼å¼ï¼‰

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/api/danmu/v3/?id=è§†é¢‘ID` | è·å–å¼¹å¹•åˆ—è¡¨ |
| POST | `/api/danmu/v3/` | å‘é€å¼¹å¹• |

#### ç®¡ç† APIï¼ˆéœ€å¯†ç éªŒè¯ï¼‰

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/api/admin/banned-words` | è·å–å±è”½è¯åˆ—è¡¨ |
| POST | `/api/admin/banned-words` | æ·»åŠ å±è”½è¯ |
| DELETE | `/api/admin/banned-words` | åˆ é™¤å±è”½è¯ |
| GET | `/api/admin/danmu` | è·å–æ‰€æœ‰å¼¹å¹• |
| DELETE | `/api/admin/danmu` | åˆ é™¤å¼¹å¹• |

ç®¡ç†APIéœ€è¦åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ  `X-Admin-Password` æˆ–åœ¨è¯·æ±‚ä½“ä¸­æ·»åŠ  `password` å­—æ®µã€‚

## é…ç½®è¯´æ˜

### ç«¯å£é…ç½®

é»˜è®¤ç«¯å£ä¸º `1919`ï¼Œå¯é€šè¿‡ç¯å¢ƒå˜é‡ä¿®æ”¹ï¼š

```bash
PORT=8080 npm start
```

### æ•æ„Ÿè¯åº“æ›´æ–°

ç³»ç»Ÿä¼šè‡ªåŠ¨ä» GitHub ä»“åº“ `konsheng/Sensitive-lexicon` åŒæ­¥æ•æ„Ÿè¯åº“ï¼Œæ¯24å°æ—¶æ›´æ–°ä¸€æ¬¡ã€‚

## æŠ€æœ¯æ ˆ

- **åç«¯**ï¼šNode.js + Express
- **å‰ç«¯**ï¼šåŸç”Ÿ HTML/CSS/JavaScript
- **æ’­æ”¾å™¨**ï¼šDPlayer
- **æµåª’ä½“**ï¼šhls.js + flv.js

## License

MIT
